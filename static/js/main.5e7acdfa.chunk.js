(this["webpackJsonpproject-ts"]=this["webpackJsonpproject-ts"]||[]).push([[0],{119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),a=n(16),o=n.n(a),r=n(55),s=n.n(r),l=n(28),d=n(65),j=n(30),u=n(163),b=n(161),h=n(156),p=n(154),O=n(155),x=n(90),f=n(89),m=n(23),g=n(22),v=n(157),y=n(158),w=n(88),C=n.n(w),A=n(87),I=n.n(A),P=n(123),S=n(53),E={email:"",password:""},_={email:"",password:"",confirmPassword:""},T={id:null,title:"",content:""},k=[],N={id:null,title:"",content:""},D=Object(S.b)({name:"notification",initialState:{severity:"",message:"",open:!1},reducers:{sendNotification:function(e,t){e.severity=t.payload.severity,e.message=t.payload.message,e.open=t.payload.open},showNotification:function(e,t){e.open=t.payload}}}),R=D.actions,W=D,z=n(151),U=n(168),B=n(165),G=n(5),K=Object(z.a)((function(e){return Object(U.a)({paper:{width:"550px",height:"240px",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:e.spacing(2,2,2)}})})),H=function(e){var t=K();return Object(G.jsx)(B.a,{disableBackdropClick:!0,open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(G.jsx)(u.a,{display:"flex",justifyContent:"center",mt:32,children:Object(G.jsx)("div",{className:t.paper,children:e.children})})})},F=n(91),J=Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBzjpI6PW6r-QszNXvk5J8gUyGNtGODQz8",REACT_APP_APP_ID:"1:358232305713:web:9657cd5592bd3588096510",REACT_APP_AUTH_DOMAIN:"todoapp-1e512.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"358232305713",REACT_APP_PROJECT_ID:"todoapp-1e512",REACT_APP_STORAGE_BUCKET:"todoapp-1e512.appspot.com"}),M={apiKey:J.REACT_APP_API_KEY,authDomain:J.REACT_APP_AUTH_DOMAIN,projectId:J.REACT_APP_PROJECT_ID,storageBucket:J.REACT_APP_STORAGE_BUCKET,messagingSenderId:J.REACT_APP_MESSAGING_SENDER_ID,appId:J.REACT_APP_APP_ID},L=F.a.initializeApp(M),Q=Object(P.a)({root:{height:"150px",display:"flex",width:"100%",flexDirection:"column",justifyContent:"space-between",color:"#1c1e21",backgroundColor:"#fff",boxShadow:"rgba(60, 64, 67, 0.3) 1px 2px 3px 1px, rgba(60, 64, 67, 0.15) 1px 2px 4px 2px",borderRadius:"5px"}}),Y=function(e){var t=e.title,n=e.id,i=e.content,a=e.setTodoToEdit,o=e.setOpen,r=Object(c.useState)(!1),s=Object(j.a)(r,2),l=s[0],d=s[1],b=Object(m.c)((function(e){return e.auth.userId})),x=Object(m.b)(),f=Q(),g=Object(G.jsxs)(u.a,{display:"flex",flexDirection:"column",textAlign:"center",mt:8,children:[Object(G.jsx)("h2",{children:"Do you want to delete this Todo?"}),Object(G.jsxs)(u.a,{display:"flex",justifyContent:"center",children:[Object(G.jsx)(u.a,{mx:1,children:Object(G.jsx)(p.a,{variant:"contained",color:"secondary",onClick:function(){return function(e){L.firestore().collection("todos").doc("users").collection("".concat(b)).doc("".concat(e)).delete().catch((function(e){return x(R.sendNotification({severity:"error",message:e.message,open:!0}))})),x(R.sendNotification({severity:"warning",message:"Todo deleted.",open:!0}))}(n)},children:"Delete"})}),Object(G.jsx)(u.a,{mx:1,children:Object(G.jsx)(p.a,{variant:"contained",onClick:function(){return d(!1)},children:"Cancel"})})]})]});return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(H,{open:l,setOpen:d,children:g}),Object(G.jsx)(O.a,{item:!0,xs:12,sm:6,children:Object(G.jsxs)(u.a,{className:f.root,children:[Object(G.jsx)(u.a,{textAlign:"center",children:Object(G.jsx)(h.a,{variant:"h6",children:t.length>=20?t.substring(0,20)+"...":t})}),Object(G.jsx)(v.a,{children:Object(G.jsx)(h.a,{paragraph:!0,children:i.length>=20?i.substring(0,20)+"...":i})}),Object(G.jsx)(u.a,{display:"flex",justifyContent:"flex-end",children:Object(G.jsxs)(y.a,{children:[Object(G.jsx)(p.a,{size:"small",variant:"contained",onClick:function(){return function(e){o(!0);var n={id:e,title:t,content:i};a(n),L.firestore().collection("todos").doc("users").collection("".concat(b)).doc("".concat(e)).update(n).catch((function(e){return x(R.sendNotification({severity:"error",message:e.message,open:!0}))}))}(n)},children:Object(G.jsx)(I.a,{})}),Object(G.jsx)(p.a,{size:"small",variant:"contained",color:"secondary",onClick:function(){return d(!0)},children:Object(G.jsx)(C.a,{})})]})})]})})]})},V=Object(S.b)({name:"auth",initialState:{isAuth:null,userId:null,darkmodeOn:!1},reducers:{login:function(e,t){e.isAuth=!0,e.userId=t.payload},logout:function(e){e.isAuth=!1,e.userId=null}}}),X=V.actions,q=V,Z=n(35),$=n(159),ee=n(160),te=n(162),ne=function(e){var t=e.todoToEdit,n=e.setTodoToEdit,i=e.setOpen,a=Object(c.useState)(T),o=Object(j.a)(a,2),r=o[0],b=o[1],h=Object(m.b)(),O=Object(m.c)((function(e){return e.auth.userId}));Object(c.useEffect)((function(){return t.id&&b(t),function(){return b(T)}}),[t]);var x=function(e){return function(t){var n;r.id?b(Object(l.a)(Object(l.a)({},r),{},Object(Z.a)({},e,t.target.value))):b(Object(l.a)(Object(l.a)({},r),{},(n={},Object(Z.a)(n,e,t.target.value),Object(Z.a)(n,"id",Date.now()),n)))}},f=function(){var e=Object(d.a)(s.a.mark((function e(t,n,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.firestore().collection("todos").doc("users").collection("".concat(O)).doc("".concat(t)).set({id:t,title:n,content:c}).then((function(){b(T)})).catch((function(e){h(R.sendNotification({severity:"error",message:e.message,open:!0}))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(G.jsxs)($.a,{component:"main",maxWidth:"md",children:[Object(G.jsx)(u.a,{my:1,width:"100%",children:Object(G.jsx)(ee.a,{fullWidth:!0,children:Object(G.jsx)(te.a,{onChange:x("title"),value:r.title,variant:"outlined",label:"Title"})})})," ",Object(G.jsx)(u.a,{my:1,width:"100%",children:Object(G.jsx)(ee.a,{fullWidth:!0,children:Object(G.jsx)(te.a,{onChange:x("content"),value:r.content,multiline:!0,rows:"2",variant:"outlined",label:"Content"})})}),Object(G.jsxs)(u.a,{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",children:[Object(G.jsx)(u.a,{width:"40%",my:1,children:Object(G.jsx)(p.a,{onClick:function(e){e.preventDefault(),""!==r.title&&""!==r.content?(f(r.id,r.title,r.content),t.id?(n({id:null,title:"",content:""}),h(R.sendNotification({severity:"info",message:"Todo updated.",open:!0}))):h(R.sendNotification({severity:"success",message:"New todo added.",open:!0})),i(!1)):h(R.sendNotification({severity:"error",message:"Inputs cannot be empty.",open:!0}))},variant:"contained",fullWidth:!0,color:"primary",children:t.id?"Update":"Add"})}),Object(G.jsx)(u.a,{width:"40%",my:1,children:Object(G.jsx)(p.a,{onClick:function(){n({id:null,title:"",content:""}),i(!1)},variant:"contained",fullWidth:!0,color:"default",children:"Cancel"})})]})]})},ce=function(){var e=Object(c.useState)(k),t=Object(j.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(N),o=Object(j.a)(a,2),r=o[0],v=o[1],y=Object(c.useState)(!1),w=Object(j.a)(y,2),C=w[0],A=w[1],I=Object(m.b)(),P=Object(g.g)(),S=Object(m.c)((function(e){return e.auth.userId})),E=localStorage.getItem("username"),_=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.firestore().collection("todos").doc("users").collection("".concat(t)).orderBy("id","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(l.a)({},e.data()))})),i(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){_(S)}),[S]);var T=Object(G.jsx)(ne,{todoToEdit:r,setTodoToEdit:v,setOpen:A});return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(H,{open:C,setOpen:A,children:T}),Object(G.jsxs)(u.a,{style:{backgroundColor:"#fff",boxShadow:"rgba(60, 64, 67, 0.3) 1px 2px 3px 1px, rgba(60, 64, 67, 0.15) 1px 2px 4px 2px"},minHeight:"96vh",children:[Object(G.jsx)(b.a,{position:"static",children:Object(G.jsxs)(u.a,{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,px:1,style:{backgroundColor:"#1976d2"},children:[Object(G.jsx)(h.a,{variant:"h6",children:E}),Object(G.jsx)(u.a,{display:"flex",children:Object(G.jsx)(p.a,{onClick:function(){localStorage.removeItem("loged"),localStorage.removeItem("username"),localStorage.removeItem("userId"),L.auth().signOut().then((function(){P.replace("/login"),I(X.login(null))})).catch((function(e){I(R.sendNotification({severity:"error",message:e.message,open:!0}))}))},variant:"contained",children:"Logout"})})]})}),Object(G.jsxs)("h1",{style:{textAlign:"center",marginTop:"1.5rem"},children:[Object(G.jsx)("span",{children:Object(G.jsx)(f.a,{size:"1.5rem"})}),Object(G.jsx)("span",{children:"TODO"}),Object(G.jsx)("span",{style:{color:"rgb(25, 118, 210)"},children:"APP"})]}),Object(G.jsx)(u.a,{display:"flex",justifyContent:"flex-end",pt:6,children:Object(G.jsx)(p.a,{onClick:function(){return A(!0)},children:Object(G.jsx)(x.a,{size:"4rem",color:"rgb(25, 118, 210)"})})}),Object(G.jsx)(u.a,{mt:2,px:1,children:Object(G.jsx)(O.a,{container:!0,direction:"row",justify:"center",spacing:1,children:n.length>0?n.map((function(e){return Object(G.jsx)(Y,{title:e.title,id:e.id,content:e.content,setTodoToEdit:v,setOpen:A},e.id)})):Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(h.a,{variant:"h5",children:["No todos to show.",Object(G.jsx)("div",{className:"divider"})]})})})})]})]})},ie=Object(S.a)({reducer:{auth:q.reducer,notification:W.reducer}}),ae=n(39),oe=n(92),re=["component"],se=function(e){var t=e.component,n=Object(oe.a)(e,re),c=Object(m.b)();"true"===localStorage.getItem("loged")&&c(X.login(localStorage.getItem("userId")));var i=Object(m.c)((function(e){return e.auth.isAuth}));return Object(G.jsx)(g.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return i?Object(G.jsx)(t,{}):Object(G.jsx)(g.a,{to:"/login"})}}))},le=n(70),de=function(){var e=Object(c.useState)(E),t=Object(j.a)(e,2),n=t[0],i=t[1],a=Object(g.g)(),o=Object(m.b)(),r=function(e){return function(t){i(Object(l.a)(Object(l.a)({},n),{},Object(Z.a)({},e,t.target.value)))}};return Object(G.jsxs)(u.a,{display:"flex",flexDirection:"column",alignItems:"center",style:{backgroundColor:"#fff"},p:2,borderRadius:5,children:[Object(G.jsx)(u.a,{style:{backgroundColor:"rgb(25, 118, 210)"},borderRadius:"30px",height:"60px",width:"60px",display:"flex",justifyContent:"center",alignItems:"center",p:1,color:"primary",children:Object(G.jsx)(le.a,{size:"2.5rem",color:"#fff"})}),Object(G.jsx)(h.a,{variant:"h5",children:"Sing In"}),Object(G.jsx)(u.a,{my:1,width:"100%",children:Object(G.jsx)(ee.a,{fullWidth:!0,children:Object(G.jsx)(te.a,{id:"email",type:"email",onChange:r("email"),value:n.email,label:"Email",variant:"outlined"})})}),Object(G.jsx)(u.a,{my:1,width:"100%",children:Object(G.jsx)(ee.a,{fullWidth:!0,children:Object(G.jsx)(te.a,{id:"password",type:"password",onChange:r("password"),value:n.password,label:"Password",variant:"outlined"})})}),Object(G.jsx)(u.a,{width:"100%",my:1,children:Object(G.jsx)(p.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(e){e.preventDefault(),L.auth().signInWithEmailAndPassword(n.email,n.password).then((function(e){if(e){var t,n,c=null===(t=e.user.email)||void 0===t?void 0:t.substring(0,null===(n=e.user.email)||void 0===n?void 0:n.indexOf("@"));localStorage.setItem("userId","".concat(e.user.uid)),localStorage.setItem("loged","true"),localStorage.setItem("username","".concat(c)),a.push("/"),o(X.login(e.user.uid))}})).catch((function(e){o(R.sendNotification({severity:"error",message:e.message,open:!0}))})),i(E)},children:"Login"})}),Object(G.jsx)(ae.b,{to:"/registration",children:Object(G.jsx)(h.a,{variant:"h6",children:"I don't have and account."})})]})},je=function(){var e=Object(c.useState)(_),t=Object(j.a)(e,2),n=t[0],i=t[1],a=Object(g.g)(),o=Object(m.b)(),r=function(e){return function(t){i(Object(l.a)(Object(l.a)({},n),{},Object(Z.a)({},e,t.target.value)))}};return Object(G.jsxs)(u.a,{display:"flex",flexDirection:"column",alignItems:"center",style:{backgroundColor:"#fff"},p:2,borderRadius:5,children:[Object(G.jsx)(u.a,{style:{backgroundColor:"rgb(25, 118, 210)"},borderRadius:"30px",height:"60px",width:"60px",display:"flex",justifyContent:"center",alignItems:"center",p:1,color:"primary",children:Object(G.jsx)(le.a,{size:"2.5rem",color:"#fff"})}),Object(G.jsx)(h.a,{variant:"h5",children:"Sing Up"}),Object(G.jsx)(u.a,{my:1,width:"100%",children:Object(G.jsx)(ee.a,{fullWidth:!0,children:Object(G.jsx)(te.a,{id:"email",type:"email",onChange:r("email"),value:n.email,label:"Email",variant:"outlined"})})}),Object(G.jsx)(u.a,{my:1,width:"100%",children:Object(G.jsx)(ee.a,{fullWidth:!0,children:Object(G.jsx)(te.a,{id:"password",type:"password",onChange:r("password"),value:n.password,label:"Password",variant:"outlined"})})}),Object(G.jsx)(u.a,{my:1,width:"100%",children:Object(G.jsx)(ee.a,{fullWidth:!0,children:Object(G.jsx)(te.a,{id:"confirmPassword",type:"password",onChange:r("confirmPassword"),value:n.confirmPassword,label:"Confirm Password",variant:"outlined"})})}),Object(G.jsx)(u.a,{width:"100%",my:1,children:Object(G.jsx)(p.a,{variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),n.password===n.confirmPassword?(L.auth().createUserWithEmailAndPassword(n.email,n.password).then((function(e){if(e){var t,n,c=null===(t=e.user.email)||void 0===t?void 0:t.substring(0,null===(n=e.user.email)||void 0===n?void 0:n.indexOf("@"));localStorage.setItem("userId","".concat(e.user.uid)),localStorage.setItem("username","".concat(c)),localStorage.setItem("loged","true"),a.push("/"),o(X.login(e.user.uid))}})).catch((function(e){o(R.sendNotification({severity:"error",message:e.message,open:!0}))})),i(_)):o(R.sendNotification({severity:"error",message:"Passwords don't match.",open:!0}))},fullWidth:!0,children:"Signup"})}),Object(G.jsx)(ae.b,{to:"/login",children:Object(G.jsx)(h.a,{variant:"h6",children:"I already have and account."})})]})},ue=n(167),be=n(164),he=function(){var e,t=Object(m.c)((function(e){return e.notification})),n=t.severity,c=t.message,i=t.open;switch(n){case"error":e=Object(G.jsx)(be.a,{variant:"filled",style:{width:"540px"},severity:"error",children:c});break;case"success":e=Object(G.jsx)(be.a,{variant:"filled",style:{width:"540px"},severity:"success",children:c});break;case"info":e=Object(G.jsx)(be.a,{variant:"filled",style:{width:"540px"},severity:"info",children:c});break;case"warning":e=Object(G.jsx)(be.a,{variant:"filled",style:{width:"540px"},severity:"warning",children:c})}var a=Object(m.b)();return Object(G.jsx)(ue.a,{open:i,autoHideDuration:3e3,onClose:function(){a(R.showNotification(!1))},children:e})},pe=(n(119),function(){return Object(G.jsx)($.a,{maxWidth:"sm",children:Object(G.jsxs)(m.a,{store:ie,children:[Object(G.jsx)(ae.a,{children:Object(G.jsxs)(g.d,{children:[Object(G.jsx)(g.b,{path:"/login",component:de}),Object(G.jsx)(g.b,{path:"/registration",component:je}),Object(G.jsx)(se,{path:"/",component:ce})]})}),Object(G.jsx)(he,{})]})})});o.a.render(Object(G.jsx)(i.a.StrictMode,{children:Object(G.jsx)(pe,{})}),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.5e7acdfa.chunk.js.map