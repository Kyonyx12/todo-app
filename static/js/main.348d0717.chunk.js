(this["webpackJsonpproject-ts"]=this["webpackJsonpproject-ts"]||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(22),i=n.n(o),r=n(49),s=n.n(r),l=n(27),d=n(62),j=n(29),u=n(89),b=n(148),O=n(149),h=n(151),p=n(142),f=n(140),m=n(141),x=n(87),g=n(20),v=n(21),y=n(143),w=n(144),C=n(86),A=n.n(C),S=n(85),I=n.n(S),E=n(119),P=n(48),_={email:"",password:""},T={email:"",password:"",confirmPassword:""},k={id:null,title:"",content:""},N=[],D={id:null,title:"",content:""},W=Object(P.b)({name:"notification",initialState:{severity:"",message:"",open:!1},reducers:{sendNotification:function(e,t){e.severity=t.payload.severity,e.message=t.payload.message,e.open=t.payload.open},showNotification:function(e,t){e.open=t.payload}}}),R=W.actions,z=W,F=n(153),U=n(5),G=function(e){return Object(U.jsx)(F.a,{open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:e.children})},K=n(88),B=Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBzjpI6PW6r-QszNXvk5J8gUyGNtGODQz8",REACT_APP_APP_ID:"1:358232305713:web:9657cd5592bd3588096510",REACT_APP_AUTH_DOMAIN:"todoapp-1e512.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"358232305713",REACT_APP_PROJECT_ID:"todoapp-1e512",REACT_APP_STORAGE_BUCKET:"todoapp-1e512.appspot.com"}),H={apiKey:B.REACT_APP_API_KEY,authDomain:B.REACT_APP_AUTH_DOMAIN,projectId:B.REACT_APP_PROJECT_ID,storageBucket:B.REACT_APP_STORAGE_BUCKET,messagingSenderId:B.REACT_APP_MESSAGING_SENDER_ID,appId:B.REACT_APP_APP_ID},J=K.a.initializeApp(H),M=Object(E.a)({root:{height:"150px",display:"flex",width:"100%",flexDirection:"column",justifyContent:"space-between",color:"rgba(0, 0, 0, 0.87)",backgroundColor:"#fafafa",boxShadow:"0 0 8px rgba(0,0,0,0.25)"},paper:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",width:"70vw",height:"120px",color:"rgba(0, 0, 0, 0.87)",transform:"translate(20%,283%)",backgroundColor:"#fafafa",border:"2px solid #000"}}),L=function(e){var t=e.title,n=e.id,a=e.content,o=e.setTodoToEdit,i=e.setOpen,r=Object(c.useState)(!1),s=Object(j.a)(r,2),l=s[0],d=s[1],u=Object(g.c)((function(e){return e.auth.userId})),b=Object(g.b)(),O=M(),x=Object(U.jsxs)("div",{className:O.paper,children:[Object(U.jsx)("h2",{children:"Do you want to delete this Todo?"}),Object(U.jsxs)(h.a,{children:[Object(U.jsx)(f.a,{variant:"contained",color:"secondary",onClick:function(){return function(e){J.firestore().collection("todos").doc("users").collection("".concat(u)).doc("".concat(e)).delete().catch((function(e){return b(R.sendNotification({severity:"error",message:e.message,open:!0}))})),b(R.sendNotification({severity:"warning",message:"Todo deleted.",open:!0}))}(n)},children:"Delete"}),Object(U.jsx)(f.a,{variant:"contained",onClick:function(){return d(!1)},children:"Cancel"})]})]});return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(G,{open:l,setOpen:d,children:x}),Object(U.jsx)(m.a,{item:!0,xs:12,sm:6,md:4,children:Object(U.jsxs)(h.a,{className:O.root,children:[Object(U.jsx)(h.a,{textAlign:"center",children:Object(U.jsx)(p.a,{noWrap:!0,variant:"h6",children:t})}),Object(U.jsx)(y.a,{children:Object(U.jsx)(p.a,{noWrap:!0,paragraph:!0,children:a})}),Object(U.jsx)(h.a,{display:"flex",justifyContent:"flex-end",children:Object(U.jsxs)(w.a,{children:[Object(U.jsx)(f.a,{size:"small",variant:"contained",onClick:function(){return function(e){i(!0);var n={id:e,title:t,content:a};o(n),J.firestore().collection("todos").doc("users").collection("".concat(u)).doc("".concat(e)).update(n).catch((function(e){return b(R.sendNotification({severity:"error",message:e.message,open:!0}))}))}(n)},children:Object(U.jsx)(I.a,{})}),Object(U.jsx)(f.a,{size:"small",variant:"contained",color:"secondary",onClick:function(){return d(!0)},children:Object(U.jsx)(A.a,{})})]})})]})})]})},Q=n(147),Y=n(157),V=Object(P.b)({name:"auth",initialState:{isAuth:null,userId:null,darkmodeOn:!1},reducers:{login:function(e,t){e.isAuth=!0,e.userId=t.payload},logout:function(e){e.isAuth=!1,e.userId=null},darkmode:function(e,t){e.darkmodeOn=!0}}}),X=V.actions,q=V,Z=n(33),$=n(145),ee=n(146),te=n(155),ne=n(156),ce=function(e){var t=e.todoToEdit,n=e.setTodoToEdit,a=e.setOpen,o=Object(c.useState)(k),i=Object(j.a)(o,2),r=i[0],u=i[1],b=Object(g.b)(),O=Object(g.c)((function(e){return e.auth.userId}));Object(c.useEffect)((function(){return t.id&&u(t),function(){return u(k)}}),[t]);var p=function(e){return function(t){var n;r.id?u(Object(l.a)(Object(l.a)({},r),{},Object(Z.a)({},e,t.target.value))):u(Object(l.a)(Object(l.a)({},r),{},(n={},Object(Z.a)(n,e,t.target.value),Object(Z.a)(n,"id",Date.now()),n)))}},m=function(){var e=Object(d.a)(s.a.mark((function e(t,n,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.firestore().collection("todos").doc("users").collection("".concat(O)).doc("".concat(t)).set({id:t,title:n,content:c}).then((function(){u(k)})).catch((function(e){b(R.sendNotification({severity:"error",message:e.message,open:!0}))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(U.jsxs)($.a,{component:"main",maxWidth:"md",children:[Object(U.jsxs)(ee.a,{fullWidth:!0,children:[Object(U.jsx)(te.a,{children:"Title"}),Object(U.jsx)(ne.a,{onChange:p("title"),value:r.title})]}),Object(U.jsxs)(ee.a,{fullWidth:!0,children:[Object(U.jsx)(te.a,{children:"Content"}),Object(U.jsx)(ne.a,{onChange:p("content"),value:r.content,multiline:!0,rows:"4"})]}),Object(U.jsxs)(h.a,{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",children:[Object(U.jsx)(h.a,{width:"40%",my:1,children:Object(U.jsx)(f.a,{onClick:function(e){e.preventDefault(),""!==r.title&&""!==r.content?(m(r.id,r.title,r.content),t.id?(n({id:null,title:"",content:""}),b(R.sendNotification({severity:"info",message:"Todo updated.",open:!0}))):b(R.sendNotification({severity:"success",message:"New todo added.",open:!0})),a(!1)):b(R.sendNotification({severity:"error",message:"Inputs cannot be empty.",open:!0}))},variant:"contained",fullWidth:!0,color:"primary",children:t.id?"Update":"Add"})}),Object(U.jsx)(h.a,{width:"40%",my:1,children:Object(U.jsx)(f.a,{onClick:function(){n({id:null,title:"",content:""}),a(!1)},variant:"contained",fullWidth:!0,color:"default",children:"Cancel"})})]})]})},ae=n(74),oe=Object(Q.a)((function(e){return Object(Y.a)({paper:{width:"70vw",height:"280px",transform:"translate(21.5%,80%)",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,2,2)}})})),ie=function(){var e=Object(c.useState)(N),t=Object(j.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(D),i=Object(j.a)(o,2),r=i[0],y=i[1],w=Object(c.useState)(!1),C=Object(j.a)(w,2),A=C[0],S=C[1],I=Object(c.useState)(!1),E=Object(j.a)(I,2),P=E[0],_=E[1],T=Object(g.b)(),k=Object(v.g)(),W=Object(g.c)((function(e){return e.auth.userId})),z=Object(g.c)((function(e){return e.auth.darkmodeOn})),F=localStorage.getItem("username"),K=Object(u.a)({palette:{type:P?"dark":"light"}}),B=function(){P?(_(!1),localStorage.setItem("darkmode","off")):(_(!0),localStorage.setItem("darkmode","on"))},H=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.firestore().collection("todos").doc("users").collection("".concat(t)).orderBy("id","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(l.a)({},e.data()))})),a(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){H(W)}),[W]),Object(c.useEffect)((function(){_(!!z)}),[z]);var M=oe(),Q=Object(U.jsx)("div",{className:M.paper,children:Object(U.jsx)(ce,{todoToEdit:r,setTodoToEdit:y,setOpen:S})});return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(G,{open:A,setOpen:S,children:Q}),Object(U.jsx)(b.a,{theme:K,children:Object(U.jsxs)(O.a,{children:[Object(U.jsxs)(h.a,{display:"flex",justifyContent:"space-between",alignItems:"center",my:1,children:[Object(U.jsx)(p.a,{noWrap:!0,variant:"h6",children:F}),Object(U.jsxs)(h.a,{display:"flex",alignContent:"center",children:[Object(U.jsx)(h.a,{mx:2,children:P?Object(U.jsx)(f.a,{children:Object(U.jsx)(ae.b,{size:"2rem",onClick:B})}):Object(U.jsx)(f.a,{children:Object(U.jsx)(ae.a,{size:"2rem",onClick:B})})}),Object(U.jsx)(f.a,{onClick:function(){localStorage.removeItem("loged"),localStorage.removeItem("username"),localStorage.removeItem("userId"),J.auth().signOut().then((function(){k.replace("/login"),T(X.login(null))})).catch((function(e){T(R.sendNotification({severity:"error",message:e.message,open:!0}))}))},variant:"contained",children:"Logout"})]})]}),Object(U.jsx)("h1",{children:"Todo App"}),Object(U.jsx)(h.a,{display:"flex",justifyContent:"flex-end",pt:10,children:Object(U.jsx)(f.a,{onClick:function(){return S(!0)},children:Object(U.jsx)(x.a,{size:"4rem"})})}),Object(U.jsx)(h.a,{mt:2,children:Object(U.jsx)(m.a,{container:!0,direction:"row",justify:"center",spacing:1,children:n.length>0?n.map((function(e){return Object(U.jsx)(L,{title:e.title,id:e.id,content:e.content,setTodoToEdit:y,setOpen:S},e.id)})):Object(U.jsx)("p",{children:"No todos to show."})})})]})})]})},re=Object(P.a)({reducer:{auth:q.reducer,notification:z.reducer}}),se=n(36),le=n(90),de=["component"],je=function(e){var t=e.component,n=Object(le.a)(e,de),c=Object(g.b)();"true"===localStorage.getItem("loged")&&c(X.login(localStorage.getItem("userId"))),"on"===localStorage.getItem("darkmode")&&c(X.darkmode(!0));var a=Object(g.c)((function(e){return e.auth.isAuth}));return Object(U.jsx)(v.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return a?Object(U.jsx)(t,{}):Object(U.jsx)(v.a,{to:"/login"})}}))},ue=function(){var e=Object(c.useState)(_),t=Object(j.a)(e,2),n=t[0],a=t[1],o=Object(v.g)(),i=Object(g.b)(),r=function(e){return function(t){a(Object(l.a)(Object(l.a)({},n),{},Object(Z.a)({},e,t.target.value)))}};return Object(U.jsxs)($.a,{component:"main",maxWidth:"xs",children:[Object(U.jsxs)(ee.a,{fullWidth:!0,children:[Object(U.jsx)(te.a,{htmlFor:"email",children:"Email"}),Object(U.jsx)(ne.a,{id:"email",type:"email",onChange:r("email"),value:n.email})]}),Object(U.jsxs)(ee.a,{fullWidth:!0,children:[Object(U.jsx)(te.a,{htmlFor:"password",children:"Password"}),Object(U.jsx)(ne.a,{id:"password",type:"password",onChange:r("password"),value:n.password})]}),Object(U.jsx)(f.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(e){e.preventDefault(),J.auth().signInWithEmailAndPassword(n.email,n.password).then((function(e){if(e){var t,n,c=null===(t=e.user.email)||void 0===t?void 0:t.substring(0,null===(n=e.user.email)||void 0===n?void 0:n.indexOf("@"));localStorage.setItem("userId","".concat(e.user.uid)),localStorage.setItem("loged","true"),localStorage.setItem("username","".concat(c)),o.push("/"),i(X.login(e.user.uid))}})).catch((function(e){i(R.sendNotification({severity:"error",message:e.message,open:!0}))})),a(_)},children:"Login"}),Object(U.jsx)(se.b,{to:"/registration",style:{textAlign:"center",textDecoration:"none",fontSize:"20px"},children:Object(U.jsx)("p",{children:"I don't have and account..."})})]})},be=function(){var e=Object(c.useState)(T),t=Object(j.a)(e,2),n=t[0],a=t[1],o=Object(v.g)(),i=Object(g.b)(),r=function(e){return function(t){a(Object(l.a)(Object(l.a)({},n),{},Object(Z.a)({},e,t.target.value)))}};return Object(U.jsxs)($.a,{component:"main",maxWidth:"xs",children:[Object(U.jsxs)(ee.a,{fullWidth:!0,children:[Object(U.jsx)(te.a,{htmlFor:"email",children:"Email"}),Object(U.jsx)(ne.a,{id:"email",type:"email",onChange:r("email"),value:n.email})]}),Object(U.jsxs)(ee.a,{fullWidth:!0,children:[Object(U.jsx)(te.a,{htmlFor:"password",children:"Password"}),Object(U.jsx)(ne.a,{id:"password",type:"password",onChange:r("password"),value:n.password})]}),Object(U.jsxs)(ee.a,{fullWidth:!0,children:[Object(U.jsx)(te.a,{htmlFor:"confirmPassword",children:"Confirm Password"}),Object(U.jsx)(ne.a,{id:"confirmPassword",type:"password",onChange:r("confirmPassword"),value:n.confirmPassword})]}),Object(U.jsx)(f.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(e){e.preventDefault(),n.password===n.confirmPassword?(J.auth().createUserWithEmailAndPassword(n.email,n.password).then((function(e){if(e){var t,n,c=null===(t=e.user.email)||void 0===t?void 0:t.substring(0,null===(n=e.user.email)||void 0===n?void 0:n.indexOf("@"));localStorage.setItem("userId","".concat(e.user.uid)),localStorage.setItem("username","".concat(c)),localStorage.setItem("loged","true"),o.push("/"),i(X.login(e.user.uid))}})).catch((function(e){i(R.sendNotification({severity:"error",message:e.message,open:!0}))})),a(T)):i(R.sendNotification({severity:"error",message:"Passwords don't match.",open:!0}))},children:"Signup"}),Object(U.jsx)(se.b,{to:"/login",style:{textAlign:"center",textDecoration:"none",fontSize:"20px"},children:Object(U.jsx)("p",{children:"I already have and account..."})})]})},Oe=n(152),he=n(154),pe=function(){var e,t=Object(g.c)((function(e){return e.notification})),n=t.severity,c=t.message,a=t.open;switch(n){case"error":e=Object(U.jsx)(he.a,{severity:"error",children:c});break;case"success":e=Object(U.jsx)(he.a,{severity:"success",children:c});break;case"info":e=Object(U.jsx)(he.a,{severity:"info",children:c});break;case"warning":e=Object(U.jsx)(he.a,{severity:"warning",children:c})}var o=Object(g.b)();return Object(U.jsx)(Oe.a,{open:a,autoHideDuration:3e3,onClose:function(){o(R.showNotification(!1))},children:e})},fe=(n(115),function(){return Object(U.jsx)($.a,{maxWidth:"md",children:Object(U.jsxs)(g.a,{store:re,children:[Object(U.jsx)(se.a,{children:Object(U.jsxs)(v.d,{children:[Object(U.jsx)(v.b,{path:"/login",component:ue}),Object(U.jsx)(v.b,{path:"/registration",component:be}),Object(U.jsx)(je,{path:"/",component:ie})]})}),Object(U.jsx)(pe,{})]})})});i.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(fe,{})}),document.getElementById("root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.348d0717.chunk.js.map