(this["webpackJsonpproject-ts"]=this["webpackJsonpproject-ts"]||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(21),i=n.n(o),r=n(49),s=n.n(r),l=n(27),d=n(62),j=n(30),u=n(146),b=n(145),p=n(139),O=n(137),h=n(138),f=n(85),x=n(84),m=n(22),g=n(20),v=n(140),y=n(141),w=n(83),C=n.n(w),A=n(82),P=n.n(A),I=n(116),E=n(48),S={email:"",password:""},_={email:"",password:"",confirmPassword:""},T={id:null,title:"",content:""},D=[],N={id:null,title:"",content:""},k=Object(E.b)({name:"notification",initialState:{severity:"",message:"",open:!1},reducers:{sendNotification:function(e,t){e.severity=t.payload.severity,e.message=t.payload.message,e.open=t.payload.open},showNotification:function(e,t){e.open=t.payload}}}),R=k.actions,W=k,z=n(148),F=n(5),U=function(e){return Object(F.jsx)(z.a,{open:e.open,onClose:function(){return e.setOpen(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:e.children})},G=n(86),K=Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBzjpI6PW6r-QszNXvk5J8gUyGNtGODQz8",REACT_APP_APP_ID:"1:358232305713:web:9657cd5592bd3588096510",REACT_APP_AUTH_DOMAIN:"todoapp-1e512.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"358232305713",REACT_APP_PROJECT_ID:"todoapp-1e512",REACT_APP_STORAGE_BUCKET:"todoapp-1e512.appspot.com"}),B={apiKey:K.REACT_APP_API_KEY,authDomain:K.REACT_APP_AUTH_DOMAIN,projectId:K.REACT_APP_PROJECT_ID,storageBucket:K.REACT_APP_STORAGE_BUCKET,messagingSenderId:K.REACT_APP_MESSAGING_SENDER_ID,appId:K.REACT_APP_APP_ID},H=G.a.initializeApp(B),J=Object(I.a)({root:{height:"150px",display:"flex",width:"100%",flexDirection:"column",justifyContent:"space-between",color:"#1c1e21",backgroundColor:"#fff",boxShadow:"rgba(60, 64, 67, 0.3) 1px 2px 3px 1px, rgba(60, 64, 67, 0.15) 1px 2px 4px 2px",borderRadius:"5px"},paper:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",width:"70vw",height:"120px",color:"rgba(0, 0, 0, 0.87)",transform:"translate(20%,283%)",backgroundColor:"#fafafa",border:"2px solid #000"}}),M=function(e){var t=e.title,n=e.id,a=e.content,o=e.setTodoToEdit,i=e.setOpen,r=Object(c.useState)(!1),s=Object(j.a)(r,2),l=s[0],d=s[1],b=Object(m.c)((function(e){return e.auth.userId})),f=Object(m.b)(),x=J(),g=Object(F.jsxs)("div",{className:x.paper,children:[Object(F.jsx)("h2",{children:"Do you want to delete this Todo?"}),Object(F.jsxs)(u.a,{children:[Object(F.jsx)(O.a,{variant:"contained",color:"secondary",onClick:function(){return function(e){H.firestore().collection("todos").doc("users").collection("".concat(b)).doc("".concat(e)).delete().catch((function(e){return f(R.sendNotification({severity:"error",message:e.message,open:!0}))})),f(R.sendNotification({severity:"warning",message:"Todo deleted.",open:!0}))}(n)},children:"Delete"}),Object(F.jsx)(O.a,{variant:"contained",onClick:function(){return d(!1)},children:"Cancel"})]})]});return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(U,{open:l,setOpen:d,children:g}),Object(F.jsx)(h.a,{item:!0,xs:12,sm:6,children:Object(F.jsxs)(u.a,{className:x.root,children:[Object(F.jsx)(u.a,{textAlign:"center",children:Object(F.jsx)(p.a,{noWrap:!0,variant:"h6",children:t})}),Object(F.jsx)(v.a,{children:Object(F.jsx)(p.a,{noWrap:!0,paragraph:!0,children:a})}),Object(F.jsx)(u.a,{display:"flex",justifyContent:"flex-end",children:Object(F.jsxs)(y.a,{children:[Object(F.jsx)(O.a,{size:"small",variant:"contained",onClick:function(){return function(e){i(!0);var n={id:e,title:t,content:a};o(n),H.firestore().collection("todos").doc("users").collection("".concat(b)).doc("".concat(e)).update(n).catch((function(e){return f(R.sendNotification({severity:"error",message:e.message,open:!0}))}))}(n)},children:Object(F.jsx)(P.a,{})}),Object(F.jsx)(O.a,{size:"small",variant:"contained",color:"secondary",onClick:function(){return d(!0)},children:Object(F.jsx)(C.a,{})})]})})]})})]})},L=n(144),Q=n(152),Y=Object(E.b)({name:"auth",initialState:{isAuth:null,userId:null,darkmodeOn:!1},reducers:{login:function(e,t){e.isAuth=!0,e.userId=t.payload},logout:function(e){e.isAuth=!1,e.userId=null}}}),V=Y.actions,X=Y,q=n(33),Z=n(142),$=n(143),ee=n(150),te=n(151),ne=function(e){var t=e.todoToEdit,n=e.setTodoToEdit,a=e.setOpen,o=Object(c.useState)(T),i=Object(j.a)(o,2),r=i[0],b=i[1],p=Object(m.b)(),h=Object(m.c)((function(e){return e.auth.userId}));Object(c.useEffect)((function(){return t.id&&b(t),function(){return b(T)}}),[t]);var f=function(e){return function(t){var n;r.id?b(Object(l.a)(Object(l.a)({},r),{},Object(q.a)({},e,t.target.value))):b(Object(l.a)(Object(l.a)({},r),{},(n={},Object(q.a)(n,e,t.target.value),Object(q.a)(n,"id",Date.now()),n)))}},x=function(){var e=Object(d.a)(s.a.mark((function e(t,n,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.firestore().collection("todos").doc("users").collection("".concat(h)).doc("".concat(t)).set({id:t,title:n,content:c}).then((function(){b(T)})).catch((function(e){p(R.sendNotification({severity:"error",message:e.message,open:!0}))}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(F.jsxs)(Z.a,{component:"main",maxWidth:"md",children:[Object(F.jsxs)($.a,{fullWidth:!0,children:[Object(F.jsx)(ee.a,{children:"Title"}),Object(F.jsx)(te.a,{onChange:f("title"),value:r.title})]}),Object(F.jsxs)($.a,{fullWidth:!0,children:[Object(F.jsx)(ee.a,{children:"Content"}),Object(F.jsx)(te.a,{onChange:f("content"),value:r.content,multiline:!0,rows:"4"})]}),Object(F.jsxs)(u.a,{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",children:[Object(F.jsx)(u.a,{width:"40%",my:1,children:Object(F.jsx)(O.a,{onClick:function(e){e.preventDefault(),""!==r.title&&""!==r.content?(x(r.id,r.title,r.content),t.id?(n({id:null,title:"",content:""}),p(R.sendNotification({severity:"info",message:"Todo updated.",open:!0}))):p(R.sendNotification({severity:"success",message:"New todo added.",open:!0})),a(!1)):p(R.sendNotification({severity:"error",message:"Inputs cannot be empty.",open:!0}))},variant:"contained",fullWidth:!0,color:"primary",children:t.id?"Update":"Add"})}),Object(F.jsx)(u.a,{width:"40%",my:1,children:Object(F.jsx)(O.a,{onClick:function(){n({id:null,title:"",content:""}),a(!1)},variant:"contained",fullWidth:!0,color:"default",children:"Cancel"})})]})]})},ce=Object(L.a)((function(e){return Object(Q.a)({paper:{width:"70vw",height:"280px",transform:"translate(21.5%,80%)",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,2,2)}})})),ae=function(){var e=Object(c.useState)(D),t=Object(j.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(N),i=Object(j.a)(o,2),r=i[0],v=i[1],y=Object(c.useState)(!1),w=Object(j.a)(y,2),C=w[0],A=w[1],P=Object(m.b)(),I=Object(g.g)(),E=Object(m.c)((function(e){return e.auth.userId})),S=localStorage.getItem("username"),_=function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.firestore().collection("todos").doc("users").collection("".concat(t)).orderBy("id","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(l.a)({},e.data()))})),a(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){_(E)}),[E]);var T=ce(),k=Object(F.jsx)("div",{className:T.paper,children:Object(F.jsx)(ne,{todoToEdit:r,setTodoToEdit:v,setOpen:A})});return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(U,{open:C,setOpen:A,children:k}),Object(F.jsxs)(u.a,{style:{backgroundColor:"#fff"},minHeight:"96vh",children:[Object(F.jsx)(b.a,{position:"static",children:Object(F.jsxs)(u.a,{display:"flex",justifyContent:"space-between",alignItems:"center",py:1,px:1,style:{backgroundColor:"#1976d2"},children:[Object(F.jsx)(p.a,{variant:"h6",children:S}),Object(F.jsx)(u.a,{display:"flex",children:Object(F.jsx)(O.a,{onClick:function(){localStorage.removeItem("loged"),localStorage.removeItem("username"),localStorage.removeItem("userId"),H.auth().signOut().then((function(){I.replace("/login"),P(V.login(null))})).catch((function(e){P(R.sendNotification({severity:"error",message:e.message,open:!0}))}))},variant:"contained",children:"Logout"})})]})}),Object(F.jsxs)("h1",{style:{textAlign:"center",marginTop:"1.5rem"},children:[Object(F.jsx)("span",{children:Object(F.jsx)(x.a,{size:"1.5rem"})}),Object(F.jsx)("span",{children:"TODO"}),Object(F.jsx)("span",{style:{color:"rgb(25, 118, 210)"},children:"APP"})]}),Object(F.jsx)(u.a,{display:"flex",justifyContent:"flex-end",pt:6,children:Object(F.jsx)(O.a,{onClick:function(){return A(!0)},children:Object(F.jsx)(f.a,{size:"4rem",color:"rgb(25, 118, 210)"})})}),Object(F.jsx)(u.a,{mt:2,px:1,children:Object(F.jsx)(h.a,{container:!0,direction:"row",justify:"center",spacing:1,children:n.length>0?n.map((function(e){return Object(F.jsx)(M,{title:e.title,id:e.id,content:e.content,setTodoToEdit:v,setOpen:A},e.id)})):Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(p.a,{variant:"h5",children:["No todos to show.",Object(F.jsx)("div",{className:"divider"})]})})})})]})]})},oe=Object(E.a)({reducer:{auth:X.reducer,notification:W.reducer}}),ie=n(36),re=n(87),se=["component"],le=function(e){var t=e.component,n=Object(re.a)(e,se),c=Object(m.b)();"true"===localStorage.getItem("loged")&&c(V.login(localStorage.getItem("userId")));var a=Object(m.c)((function(e){return e.auth.isAuth}));return Object(F.jsx)(g.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return a?Object(F.jsx)(t,{}):Object(F.jsx)(g.a,{to:"/login"})}}))},de=function(){var e=Object(c.useState)(S),t=Object(j.a)(e,2),n=t[0],a=t[1],o=Object(g.g)(),i=Object(m.b)(),r=function(e){return function(t){a(Object(l.a)(Object(l.a)({},n),{},Object(q.a)({},e,t.target.value)))}};return Object(F.jsxs)(u.a,{display:"flex",flexDirection:"column",alignItems:"center",style:{backgroundColor:"#fff"},p:2,borderRadius:5,children:[Object(F.jsxs)($.a,{fullWidth:!0,children:[Object(F.jsx)(ee.a,{htmlFor:"email",children:"Email"}),Object(F.jsx)(te.a,{id:"email",type:"email",onChange:r("email"),value:n.email})]}),Object(F.jsxs)($.a,{fullWidth:!0,children:[Object(F.jsx)(ee.a,{htmlFor:"password",children:"Password"}),Object(F.jsx)(te.a,{id:"password",type:"password",onChange:r("password"),value:n.password})]}),Object(F.jsx)(O.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(e){e.preventDefault(),H.auth().signInWithEmailAndPassword(n.email,n.password).then((function(e){if(e){var t,n,c=null===(t=e.user.email)||void 0===t?void 0:t.substring(0,null===(n=e.user.email)||void 0===n?void 0:n.indexOf("@"));localStorage.setItem("userId","".concat(e.user.uid)),localStorage.setItem("loged","true"),localStorage.setItem("username","".concat(c)),o.push("/"),i(V.login(e.user.uid))}})).catch((function(e){i(R.sendNotification({severity:"error",message:e.message,open:!0}))})),a(S)},children:"Login"}),Object(F.jsx)(ie.b,{to:"/registration",style:{textAlign:"center",textDecoration:"none",fontSize:"20px"},children:Object(F.jsx)("p",{children:"I don't have and account..."})})]})},je=function(){var e=Object(c.useState)(_),t=Object(j.a)(e,2),n=t[0],a=t[1],o=Object(g.g)(),i=Object(m.b)(),r=function(e){return function(t){a(Object(l.a)(Object(l.a)({},n),{},Object(q.a)({},e,t.target.value)))}};return Object(F.jsxs)(u.a,{display:"flex",flexDirection:"column",alignItems:"center",style:{backgroundColor:"#fff"},p:2,borderRadius:5,children:[Object(F.jsxs)($.a,{fullWidth:!0,children:[Object(F.jsx)(ee.a,{htmlFor:"email",children:"Email"}),Object(F.jsx)(te.a,{id:"email",type:"email",onChange:r("email"),value:n.email})]}),Object(F.jsxs)($.a,{fullWidth:!0,children:[Object(F.jsx)(ee.a,{htmlFor:"password",children:"Password"}),Object(F.jsx)(te.a,{id:"password",type:"password",onChange:r("password"),value:n.password})]}),Object(F.jsxs)($.a,{fullWidth:!0,children:[Object(F.jsx)(ee.a,{htmlFor:"confirmPassword",children:"Confirm Password"}),Object(F.jsx)(te.a,{id:"confirmPassword",type:"password",onChange:r("confirmPassword"),value:n.confirmPassword})]}),Object(F.jsx)(O.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(e){e.preventDefault(),n.password===n.confirmPassword?(H.auth().createUserWithEmailAndPassword(n.email,n.password).then((function(e){if(e){var t,n,c=null===(t=e.user.email)||void 0===t?void 0:t.substring(0,null===(n=e.user.email)||void 0===n?void 0:n.indexOf("@"));localStorage.setItem("userId","".concat(e.user.uid)),localStorage.setItem("username","".concat(c)),localStorage.setItem("loged","true"),o.push("/"),i(V.login(e.user.uid))}})).catch((function(e){i(R.sendNotification({severity:"error",message:e.message,open:!0}))})),a(_)):i(R.sendNotification({severity:"error",message:"Passwords don't match.",open:!0}))},children:"Signup"}),Object(F.jsx)(ie.b,{to:"/login",style:{textAlign:"center",textDecoration:"none",fontSize:"20px"},children:Object(F.jsx)("p",{children:"I already have and account..."})})]})},ue=n(147),be=n(149),pe=function(){var e,t=Object(m.c)((function(e){return e.notification})),n=t.severity,c=t.message,a=t.open;switch(n){case"error":e=Object(F.jsx)(be.a,{variant:"filled",style:{width:"540px"},severity:"error",children:c});break;case"success":e=Object(F.jsx)(be.a,{variant:"filled",style:{width:"540px"},severity:"success",children:c});break;case"info":e=Object(F.jsx)(be.a,{variant:"filled",style:{width:"540px"},severity:"info",children:c});break;case"warning":e=Object(F.jsx)(be.a,{variant:"filled",style:{width:"540px"},severity:"warning",children:c})}var o=Object(m.b)();return Object(F.jsx)(ue.a,{open:a,autoHideDuration:3e3,onClose:function(){o(R.showNotification(!1))},children:e})},Oe=(n(112),function(){return Object(F.jsx)(Z.a,{maxWidth:"sm",children:Object(F.jsxs)(m.a,{store:oe,children:[Object(F.jsx)(ie.a,{children:Object(F.jsxs)(g.d,{children:[Object(F.jsx)(g.b,{path:"/login",component:de}),Object(F.jsx)(g.b,{path:"/registration",component:je}),Object(F.jsx)(le,{path:"/",component:ae})]})}),Object(F.jsx)(pe,{})]})})});i.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(Oe,{})}),document.getElementById("root"))}},[[113,1,2]]]);
//# sourceMappingURL=main.dd06f1de.chunk.js.map